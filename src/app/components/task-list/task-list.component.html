<div class="task-container">
  <header class="header">
    <h1>Mes TÃ¢ches</h1>
    <div class="header-actions">
      <span class="user-email">{{ currentUser$ | async }}</span>
      <button (click)="logout()" class="btn-logout">DÃ©connexion</button>
    </div>
  </header>

  <div class="content">
    <div class="actions-bar">
      <button (click)="toggleAddForm()" class="btn-add">
        {{ showAddForm ? 'Annuler' : '+ Nouvelle tÃ¢che' }}
      </button>
    </div>

    <app-task-form 
      *ngIf="showAddForm"
      [task]="editingTask"
      (taskSaved)="editingTask ? onTaskUpdated() : onTaskAdded()"
      (cancelled)="showAddForm = false; editingTask = null"
    ></app-task-form>

    <div class="tasks-section">
      <h2>TÃ¢ches en cours</h2>
      <div class="tasks-grid">
        <div 
          *ngFor="let task of activeTasks$ | async" 
          class="task-card"
        >
          <div class="task-header">
            <h3>{{ task.title }}</h3>
            <span [class]="'priority-badge ' + getPriorityClass(task.priority)">
              {{ getPriorityLabel(task.priority) }}
            </span>
          </div>
          
          <p class="task-description">{{ task.description }}</p>
          
          <div class="task-footer">
            <span class="due-date">
              ðŸ“… {{ task.dueDate | date:'dd/MM/yyyy' }}
            </span>
            <div class="task-actions">
              <button 
                (click)="onToggleComplete(task.id)" 
                class="btn-icon btn-complete"
                title="Marquer comme terminÃ©e"
              >
                âœ“
              </button>
              <button 
                (click)="onEditTask(task)" 
                class="btn-icon btn-edit"
                title="Modifier"
              >
                âœŽ
              </button>
              <button 
                (click)="onDeleteTask(task.id)" 
                class="btn-icon btn-delete"
                title="Supprimer"
              >
                ðŸ—‘
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <p *ngIf="(activeTasks$ | async)?.length === 0" class="no-tasks">
        Aucune tÃ¢che en cours
      </p>
    </div>

    <div class="tasks-section">
      <h2>TÃ¢ches terminÃ©es</h2>
      <div class="tasks-grid">
        <div 
          *ngFor="let task of completedTasks$ | async" 
          class="task-card completed"
        >
          <div class="task-header">
            <h3>{{ task.title }}</h3>
            <span [class]="'priority-badge ' + getPriorityClass(task.priority)">
              {{ getPriorityLabel(task.priority) }}
            </span>
          </div>
          
          <p class="task-description">{{ task.description }}</p>
          
          <div class="task-footer">
            <span class="due-date">
              ðŸ“… {{ task.dueDate | date:'dd/MM/yyyy' }}
            </span>
            <div class="task-actions">
              <button 
                (click)="onToggleComplete(task.id)" 
                class="btn-icon btn-undo"
                title="RÃ©activer"
              >
                â†º
              </button>
              <button 
                (click)="onDeleteTask(task.id)" 
                class="btn-icon btn-delete"
                title="Supprimer"
              >
                ðŸ—‘
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <p *ngIf="(completedTasks$ | async)?.length === 0" class="no-tasks">
        Aucune tÃ¢che terminÃ©e
      </p>
    </div>
  </div>
</div>